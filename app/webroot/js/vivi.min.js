var VI={};!function(a){var b={},c={},d={},e="data-action",f=a.$,g=a.document;VI._=d,VI.Util=d,d.getAttribute=function(a,b){return a.getAttribute(b)},d.type=function(a){if(null===a)return"null";var b=Object.prototype.toString;return b.call(a).split(" ")[1].replace("]","")},d.getAgent=function(){var b=a.navigator,c=["Chrome","MSIE","Firefox","Opera","Safari"],d=["Google"],e="",f="",g=function(a,b){for(var c=b.length,d=-1;c>0&&-1==(d=a.indexOf(b[--c])););return{index:d,position:c}},h=function(a){var c=b.userAgent,d=c.indexOf(a),e=c.substring(d);return version=/(\d+([.]\d+)*)/,version.test(e)?RegExp.$1:null},i=g(b.vendor?b.vendor:"",d);if(-1!=i.index)e=c[i.position],f=h(e);else{var j=g(b.userAgent,c);e=c[j.position],f=h(e)}return function(){return{name:e,version:f}}}(),d.aop=function(a,b){return function(){var c=Array.prototype.slice;b.before&&b.before(),a.apply(b.context?b.context:null,c.call(arguments,0)),b.after&&b.after()}},d.define=function(a,b,c){var d;a[b]||(a[b]={});for(d in c)c.hasOwnProperty(d)&&(a[b][d]=c[d])},d.each=function(a,b){for(var c=0;c<a.length;++c)b.apply(a[c],[a[c],c])},d.templateParser=function(a,b,c){function d(a,b){var c,d,f=a;for(c in b)if(d=new RegExp(e+c+e),b.hasOwnProperty(c))for(;f.match(d);)f=b[c]?f.replace(d,b[c]):f.replace(d,"");return f}var e="#",f="";if("object"!=typeof b)try{}catch(g){throw{message:"wrong data"}}b instanceof Array||(b=[b]);for(var h=0,i=b.length;i>h;++h)f+=d(a,b[h]);return c&&(f=c(f)),f},a.localStorage||(g.onreadystatechange=function(){"complete"===g.readyState&&(d.define(a,"localStorage",function(){var b=a.location.host,c="#default#userData",d=g.createElement("DIV");g.body.appendChild(d),d.style.display="none",d.style.behavior="url("+c+")",d.addBehavior(c),a.localStorage={setItem:function(a,c){d.load(b),d.setAttribute(a,c),d.save(b)},getItem:function(a){return d.load(b),d.getAttribute(a)},removeItem:function(a){d.load(b),d.removeAttribute(a),d.save(b)}}}()),g.onreadystatechange=null)}),d.addEvent=function(a,b,c,d){return a.addEventListener?a.addEventListener(b,c,d):a.attachEvent("on"+b,c)},d.serialize=function(a,b){return b=b?b:{},f.map(f(a).serialize().split("&"),function(a){var c=a.split("=");return c[0]in b?c[0]+"="+b[c[0]](c[1]):c.join("=")}).join("&")},d.date_getDistance=function(a){for(var b=[864e5,36e5,6e4,1e3],c=[],d=0;d<b.length;++d)c.push(Math.floor(a/b[d])),a%=b[d];return c},VI.addEvent=function(a,c,f){b[a]?b[a][c]=f:(b[a]={},b[a][c]=f,d.addEvent(g.body,a,function(c){var f=c.target||c.srcElement,g=1===f.nodeType?d.getAttribute(f,e):!1;g&&g in b[a]&&"Function"===d.type(b[a][g])&&b[a][g].apply(f,[c])}))},VI.removeEvent=function(a,c){b[a][c]=null},VI.register=function(a,b){if(c[a])throw{message:a+" has been registered !"};c[a]=b},VI.init=function(a){c[a]()},VI.widgets={},VI.widgets.window=function(a){return this instanceof VI.widgets.window?(a=a?a:{},this._init(a),this):new VI.widgets.window(a)},VI.widgets.window.prototype=function(){var b=!1,c={W_CLASSNAME:"c-window",C_CLASSNAME:"c-cover"};return{_cover:{el:g.createElement("DIV"),hide:function(){this.el.style.display="none"},show:function(){this.el.style.display="block"},off:function(){g.body.removeChild(this.el)},on:function(){g.body.appendChild(this.el)},_init:function(){this.el.className=c.C_CLASSNAME,this.el.setAttribute("data-action","close"),g.body.appendChild(this.el),this.hide()}},hide:function(){this.events.beforeHide&&this.events.beforeHide(),this.el.style.display="none",this._cover.hide()},show:function(){this.el.style.display="block",this.position(),this._cover.show()},open:function(a){a&&this.getContent(a),this.show()},addEvent:function(a,b){this.events[a]=b},position:function(){var b=(a.outerHeight||g.documentElement.offsetHeight,this.el.offsetWidth||this.el.clientWidth),c=this.el.offsetHeight||this.el.clientHeight;this.el.style.marginTop="-"+c/2+"px",this.el.style.marginLeft="-"+b/2+"px"},SIMPLETEMPLATE:"<div class='c-w-h'><div class='c-w-sub'>#title#</div> <span class='c-w-close' data-action='close'></span></div><div class='c-w-c'><div class='c-w-section'>#content#</div></div>",_init:function(d){var e=this,f=d.content?d.content:"";this.el=g.createElement("DIV"),this.events={},b||(this._cover._init(),b=!0),this.el.className=c.W_CLASSNAME,g.body.appendChild(this.el),this.getContent(f),this.el.className+=" img-responsive";var h=a.outerHeight||g.documentElement.offsetHeight;this.position((g.body.offsetWidth-this.el.offsetWidth)/2,(h-this.el.offsetHeight)/2),this.hide(),VI.addEvent("click","close",function(){e.hide()}),this.el.onclick=function(b){b||(b=a.event);var c=b.target||b.srcElement,d=c.getAttribute("data-action");e.events[d]&&e.events[d].apply(e,[b])}},getContent:function(a){"String"===d.type(a)?this.el.innerHTML=a:this.el.appendChild(a)},getSimpleContent:function(a,b){var c="_a_"+Math.random();if(this.getContent(d.templateParser(this.SIMPLETEMPLATE,{title:a,content:"<div id='"+c+"'></div>"})),"String"===d.type(b)){var e=document.getElementById(c).parentNode;e.innerHTML=b}else{var e=document.getElementById(c).parentNode;e.innerHTML="",e.appendChild(b)}},error:function(a,b){this.getSimpleContent(b||"错误信息","<span class='c-w-wrong'>"+a+"</span><div style='text-align: center;'><a data-action='close' class='c-red-btn'>确定</a></div>"),this.show()},tip:function(a,b){this.getSimpleContent(b||"提示信息","<span class='c-dp'>"+a+"</span><div style='text-align: center;'><a data-action='close' class='c-red-btn'>确定</a></div>"),this.show()}}}(),VI.widgets.flash=function(a,b){if(!(this instanceof VI.widgets.flash))return new VI.widgets.flash(b);this.wrapper=a;var c=document.createElement("div");this.el=c,c.className="a-w-flash",c.style.display="none",this.wrapper.appendChild(c),this.timer=null},VI.widgets.flash.prototype={getText:function(a){this.el.innerHTML="<span class='k-icon k-i-note'></span> "+a},reset:function(a){a&&this.getText(a);var b=this;b.el.style.display="block",this.timer?(clearTimeout(this.timer),this.timer=setTimeout(function(){b.el.style.display="none"},5e3)):this.timer=setTimeout(function(){b.el.style.display="none"},5e3)}},d.getAgent=function(){var b=a.navigator,c=["Chrome","MSIE","Firefox","Opera","Safari"],d=["Google"],e="",f="",g=function(a,b){for(var c=b.length,d=-1;c>0&&-1===(d=a.indexOf(b[--c])););return{index:d,position:c}},h=function(a){var c=b.userAgent,d=c.indexOf(a),e=c.substring(d),f=/(\d+([.]\d+)*)/;return f.test(e)?RegExp.$1:null},i=g(b.vendor?b.vendor:"",d);if(-1!==i.index)e=c[i.position],f=h(e);else{var j=g(b.userAgent,c);e=c[j.position],f=h(e)}return function(){return{name:e,nameAndVersion:e+f,version:f}}}(),VI.widgets._validate=function(){var a=0,b="MSIE"===d.getAgent().name?!0:!1,c=function(a){b&&(a.checkValidity=function(){var a=this.attributes.pattern,b=this.attributes.required?this.attributes.required.specified:!1,c=f.trim(this.value);if(""===c)return b?("function"==typeof this.oninvalid&&this.oninvalid(),!1):!0;if(a&&a.specified){var d=new RegExp("^"+a.value+"$");return d.test(c)?!0:("function"==typeof this.oninvalid&&this.oninvalid(),!1)}return!0})};return function(d){var e=this,g=d.el,h=d.blur,i=d.change,j=d.focus,k=d.wraper,l=d.invalid;this.invalid=l,this.change=i,this.focus=j,this._id=a++,this.el=g,this.wraper=k,this.blur=h,this.name=g.name,this.id=g.id,this.update=function(){return e.name in k.rules&&(e.rules=k.rules[e.name]),e},this.update(),this.check=function(){var a,b=e.rules||null;return b?(a=b.apply(e.el,[e.el.checkValidity.apply(e.el,[null]),e]),a||this.el.oninvalid()):a=e.el.checkValidity.apply(e.el,[null]),a},this.el.onchange=function(a){e.change&&e.change.apply(this,[e,a])},this.el.oninvalid=function(a){a=a||{},a.dld_status=null!==this.getAttribute("required")&&""===this.value?"emptyValue":"invalidValue",e.invalid&&e.invalid.apply(this,[e,a])},this.el._dldValidate=this,this.el.onblur=function(a){e.blur&&e.blur.apply(this,[e,a])},this.el.onfocus=function(a){e.focus&&e.focus.apply(this,[e,a])},b||f(g).attr("required")&&""!=f(g).attr("pattern"),c(g)}}(),VI.widgets.validateForm=function(){var a=0;return function(b,c){var e=this,f=function(a){var b=e.check(),c=e.handle.onsubmit?e.handle.onsubmit.apply(e,[b,a]):!0;return c};c||(c={}),this._id=a++,this.handle={},this.rules={};var g=c.rules||{},h=c.handle||{};e.validations=[],this.el=b;var i={SELECT:!0,INPUT:!0,TEXTARE:!0};this._init=function(){return d.each(b.elements,function(){this.tagName in i&&e.validations.push(new VI.widgets._validate({el:this,wraper:e,invalid:e.handle.invalid,change:e.handle.change,blur:e.handle.blur,focus:e.handle.focus,rules:e.rules}))}),this},b.noValidate=!0,this.el.onsubmit=f,this.setHandle(h),this.setRules(g),this._init()}}(),VI.widgets.validateForm.prototype={check:function(){var a=!1;return d.each(this.validations,function(){this.check()||(a=!0)}),this.handle.onCheckAll&&(this.handle.onCheckAll()||(a=!0)),a?!1:!0},setHandle:function(a){var a=a||{};return this.handle.invalid=a.invalid,this.handle.onsubmit=a.onsubmit,this.handle.change=a.change,this.handle.onCheckAll=a.onCheckAll,this.handle.blur=a.blur,this.handle.focus=a.focus,this},setRules:function(a){return this.rules=a,this},submit:function(){this.el.submit()}},d.Player=function(a,b){var c,d=!1;this.stop=function(){d?clearInterval(c):clearTimeout(c)},this.start=function(d){d?(d=!0,c=setInterval(b,a)):c=setTimeout(b,a)}},VI.widgets.Slider=function(b,c,e,g){var h,i=c||1e4,j=g?g:{},k=2,l=j.auto||!0,m={},n=f(b).find("[data-page]"),o=!1,p=function(){for(var a,c=f(b).find('[data-role="pager"]')[0],d=0,g=n.length,h="";g>d;++d)h+="<li><a class=''  data-action='"+e+"' data-num = '"+(d+1)+"' >"+(d+1)+"</a></li>";return c.innerHTML=h,a=f(c).find("[data-num]"),a[0].className="on",function(b){for(d=0;g>d;++d)a[d].className="";a[b-1].className="on"}}(),q=function(a){var c={fade:{cover:null,init:function(){m.fade=function(a){var b=parseInt(a.getAttribute("data-num"),10);o||(r.animate(b),k=b,p(b))};var a=n.length,b=0;for(this.els=[],this.MAX=a,b;a>b;++b)n[b].style.position="absolute",n[b].style.zIndex=a-b+1,n[b].style.display="none";n[0].style.display="",this.cover=n[0]},resetIndex:function(a){for(var b=a,c=0,d=n.length;d>b;++b)n[b].style.zIndex=d-c++ +1;for(b=0;a>b;++b)n[b].style.zIndex=d-c++ +1},animate:function(a,b){b=b?b:{};var c=b.callback;if(this.cover!==n[a-1]){o=!0;var d=parseInt(this.cover.style.zIndex,10),e=this;n[a-1].style.display="",n[a-1].style.zIndex=d-1,f(this.cover).fadeOut(1e3,function(){e.cover=n[a-1],e.resetIndex(a-1),o=!1,c&&c()})}}},slide:{init:function(){var a,c=n.length;a=this.dX=n[0].offsetWidth,that=this,this.f=n[0].parentNode,this.els=[],this.MAX=c,this.f.style.width=c*a+"px",this.f.style.position="absolute",this.f.style.zIndex="1";var d=f(b).find('[data-action="pre"]')[0],e=f(b).find('[data-action="next"]')[0];this.pre=d?d:null,this.next=e?e:null,this.first=n[0],f.each(n,function(){this.style.cssText="float:left;"}),this.cur=0,m.slide=function(a,b){var c=parseInt(a.getAttribute("data-num"),10);o||(r.animate(c,{auto:b}),k=c,p(c))},m.pre=function(a){m.slide(a)},m.next=function(a){m.slide(a,!0)},that.resetNavBtn(1)},resetNavBtn:function(a){this.pre&&this.pre.setAttribute("data-num",a-1>0?a-1+"":this.MAX),this.next&&this.next.setAttribute("data-num",a+1<=this.MAX?a+1:1)},animate:function(a,b){b=b?b:{};var c=b.callback,d=b.auto;o=!0;var e=this.dX,g=this.first,h=this.MAX,i=this.f,j=this;1===a&&d&&1!==j.cur?(f(this.first).css({position:"relative",top:0,left:h*e-1,zIndex:1}),f(i).animate({left:-1*e*h},"slow",function(){o=!1,f(i).css({left:0}),j.resetNavBtn(a),g.style.position="",g.style.left="",c&&c()})):f(i).animate({left:-1*this.dX*(a-1)},"slow",function(){j.resetNavBtn(a),o=!1,c&&c()}),j.cur=a}}};return c[a]},r=q(e);r.init(b),h=new d.Player(i,function(){r.animate(k,{auto:!0,callback:function(){p(k),k===n.length?k=1:k++}})}),h.start(l),f(b).click(function(b){var c=b||a.event,d=c.srcElement||c.target,e=d.getAttribute("data-action");if(e)try{m[e](d)}catch(b){alert(b.message)}})},d.getDefault=function(a,b){var c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},VI.widgets.Tab=function(b,c){if("UL"!==b.tagName)throw{message:"Must UL element"};var e=b.getElementsByTagName("LI"),f=e.length,g=this,h=d.getDefault(c,{className:"selected"}),i=0;for(this.opts=h,this.contents=h.contents||[],this.lis=e,this.cName=h.className;f>i;++i)e[i].setAttribute("data-tab",i);d.addEvent(b,"click",function(b){var c=b||a.event,d=c.target||c.srcElement;if("UL"!==d.tagName){for(;"LI"!==d.tagName;)d=d.parentNode;var e=d.getAttribute("data-tab");g.select(e)}}),h.init&&h.init.call(this)},VI.widgets.Tab.prototype={select:function(a){for(var b=this.lis,c=this.contents,d=b.length,e=0;d>e;++e)b[e].className="",c[e]&&(c[e].style.display="none");b[a].className=this.cName,c[a]&&(c[a].style.display=""),this.opts.onSelect[a]&&this.opts.onSelect[a].call(b[a],this)}}}(window,void 0);